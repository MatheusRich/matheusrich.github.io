<!DOCTYPE html>
<!--[if lt IE 7]><html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html lang="en" class="no-js lt-ie9 lt-ie8" <![endif]-->
<!--[if IE 8]><html lang="en" class="no-js lt-ie9" <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"> <!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Don't use comments! Use code.</title>

    <!-- Open Graph Meta -->
    <meta content="Rich Codes" property="og:site_name">
    
      <meta content="Don't use comments! Use code." property="og:title">
    
    
      <meta content="article" property="og:type">
    
    
      <meta content="Hi, I'm Matheus Richard, a Software Engineering from Brazil. I love open source, music, games and creating programming languages." property="og:description">
    
    
      <meta content="http://matheusrich.com/dont-use-comments-use-code/" property="og:url">
    
    
      <meta content="2021-03-26T20:56:17+00:00" property="article:published_time">
      <meta content="http://matheusrich.com/about/" property="article:author">
    
    
      <meta content="http://matheusrich.com/assets/img/code.webp" property="og:image">
    

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@matheusrich">
    <meta name="twitter:creator" content="@matheusrich">
    
      <meta name="twitter:title" content="Don't use comments! Use code.">
    
    
      <meta name="twitter:url" content="http://matheusrich.com/dont-use-comments-use-code/">
    
    
      <meta name="twitter:description" content="Hi, I'm Matheus Richard, a Software Engineering from Brazil. I love open source, music, games and creating programming languages.">
    
    
      <meta name="twitter:image:src" content="http://matheusrich.com/assets/img/code.webp">
    

    <meta name="theme-color" content="#111" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/img/favicon.ico" />

    <!-- Come and get me RSS readers -->
    <link rel="alternate" type="application/rss+xml" title="Rich Codes" href="http://matheusrich.com/feed.xml" />

    <!-- Stylesheet -->
    <link async rel="stylesheet" href="/assets/css/style.css">
    <!--[if IE 8]><link rel="stylesheet" href="/assets/css/ie.css"><![endif]-->

    <link rel="canonical" href="http://matheusrich.com/dont-use-comments-use-code/">

    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Don’t use comments! Use code. | Rich Codes</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Don’t use comments! Use code." />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Let’s get this straight: comments are a code smell." />
<meta property="og:description" content="Let’s get this straight: comments are a code smell." />
<link rel="canonical" href="http://matheusrich.com/dont-use-comments-use-code/" />
<meta property="og:url" content="http://matheusrich.com/dont-use-comments-use-code/" />
<meta property="og:site_name" content="Rich Codes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-26T20:56:17+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Don’t use comments! Use code." />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-03-26T20:56:17+00:00","datePublished":"2021-03-26T20:56:17+00:00","description":"Let’s get this straight: comments are a code smell.","headline":"Don’t use comments! Use code.","mainEntityOfPage":{"@type":"WebPage","@id":"http://matheusrich.com/dont-use-comments-use-code/"},"url":"http://matheusrich.com/dont-use-comments-use-code/"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

   <div class="header">
  <div class="container">
    <h1 class="logo">
      <a href="/">
        <span class="dir">~</span>
        <span class="text"> RICH CODES </span>
      </a>
    </h1>
    <nav class="nav-collapse" style="visibility: hidden">
      <ul class="noList">
        
        <li class="element first ">
          <a href="/">🏠 Home</a>
        </li>
        
        <li class="element  ">
          <a href="/about/">👨‍💻 About me</a>
        </li>
        
        <li class="element  ">
          <a href="/categories/">🏷️ Categories</a>
        </li>
        
        <li class="element  ">
          <a href="/all/">📝 All posts</a>
        </li>
        
        <li class="element  ">
          <a href="/speaking/">🎙️ Speaking</a>
        </li>
        
        <li class="element last">
          <button class="theme-toggle" data-theme="dark" onclick="toggleTheme()">Turn lights</button>
        </li>
      </ul>
    </nav>
  </div>
</div>
<!-- end .header -->

<script>
  function toggleTheme() {
    const systemInitiatedDark = window.matchMedia('(prefers-color-scheme: dark)');
    const currentOverridenTheme = sessionStorage.getItem('theme');

    if (currentOverridenTheme === 'dark') {
      document.documentElement.setAttribute('data-theme', 'light');
      sessionStorage.setItem('theme', 'light');
    } else if (currentOverridenTheme === 'light') {
      document.documentElement.setAttribute('data-theme', 'dark');
      sessionStorage.setItem('theme', 'dark');
    } else if (systemInitiatedDark.matches) {
      document.documentElement.setAttribute('data-theme', 'light');
      sessionStorage.setItem('theme', 'light');
    } else {
      document.documentElement.setAttribute('data-theme', 'dark');
      sessionStorage.setItem('theme', 'dark');
    }
  }

  const overridenTheme = sessionStorage.getItem('theme');
  if (overridenTheme === 'dark') {
    document.documentElement.setAttribute('data-theme', 'dark');
    sessionStorage.setItem('theme', 'dark');
  } else if (overridenTheme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    sessionStorage.setItem('theme', 'light');
  }
</script>


   <div class="content">
      <div class="container">
         <article class="post">
  

  <h1 class="postTitle">
    Don't use comments! Use code.
  </h1>

  <p class="meta">
    March 26, 2021 | <span class="time">10</span> minute read
    

    
      | ✍🏼
        <a href="https://github.com/MatheusRich/matheusrich.github.io/blob/main/_posts/2021-03-26-dont-use-comments-use-code.md">
          Fix typo
        </a>
    

    
  </p>

  <blockquote>
  <p>Let’s get this straight: <strong>comments are a code smell</strong>.</p>
</blockquote>

<p>Whenever I feel like adding comments to my code I stop and ask myself: <em>“Is there any way to NOT use
comments here and use code instead?”</em>. Often the answer is <em>“yes”</em>.</p>

<p>Comments are a lazy solution for developers. They spare us from thinking about abstractions and
naming (which is <a href="https://martinfowler.com/bliki/TwoHardThings.html">one of the hardest things</a> in Computer Science indeed), and that’s why
they’re so tempting.</p>

<p>However, we can easily avoid (most) comments! As the saying goes <em>“Talk is cheap, show me the
code”</em>. So, here we go:</p>

<h2 id="describing-the-obvious"><a href="#describing-the-obvious">Describing the obvious</a></h2>

<p>Let’s get this one out of the way: these “describing” comments are just useless. They’re just
duplications and add no value. On the contrary, they encourage other developers to do the same! Just
get rid of them. Good variable and function naming is the way to go here.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### DON'T ###</span>

<span class="k">module</span> <span class="nn">Dungeon</span>
  <span class="c1"># Generates an array of rooms</span>
 <span class="k">def</span> <span class="nf">generate_arr</span>
    <span class="c1"># Initializes an empty array of rooms</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Creates five rooms with the given width and height and add them the `arr` variable</span>
    <span class="mi">5</span><span class="p">.</span><span class="nf">times</span> <span class="p">{</span> <span class="n">arr</span> <span class="o">&lt;&lt;</span> <span class="n">create_room</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span> <span class="p">}</span>

    <span class="c1"># ...</span>
 <span class="k">end</span>
<span class="k">end</span>

<span class="c1">### DO ###</span>

<span class="k">module</span> <span class="nn">Dungeon</span>
 <span class="k">def</span> <span class="nf">generate_rooms</span>
    <span class="n">rooms</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="mi">5</span><span class="p">.</span><span class="nf">times</span> <span class="p">{</span> <span class="n">rooms</span> <span class="o">&lt;&lt;</span> <span class="n">create_room</span><span class="p">(</span><span class="ss">width: </span><span class="mi">10</span><span class="p">,</span> <span class="ss">height: </span><span class="mi">12</span><span class="p">)</span> <span class="p">}</span>

    <span class="c1"># ...</span>
 <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="just-do-it"><a href="#just-do-it">Just do it</a></h2>

<p>Probably the most common use of comments: explaining what the code does. If we have the principle <a href="https://martinfowler.com/bliki/TellDontAsk.html">“Tell, don’t
ask”</a> in OOP, for commenting it should be <strong>“Do, don’t tell”</strong>. Extracting behavior into modules/functions makes
searching, modifying, and testing far easier than when using comments.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### DON'T ###</span>

<span class="k">def</span> <span class="nf">something_important</span>
  <span class="nb">system</span><span class="p">(</span><span class="s2">"stty -echo"</span><span class="p">)</span> <span class="c1"># disables echo on terminal</span>
  <span class="n">read_password</span>
  <span class="nb">system</span><span class="p">(</span><span class="s2">"stty echo"</span><span class="p">)</span> <span class="c1"># enables echo on terminal</span>
<span class="k">end</span>

<span class="c1">### DO ###</span>

<span class="k">module</span> <span class="nn">Terminal</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">enable_echo</span>
    <span class="nb">system</span><span class="p">(</span><span class="s2">"stty echo"</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">disable_echo</span>
    <span class="nb">system</span><span class="p">(</span><span class="s2">"stty -echo"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">something_important</span>
  <span class="no">Terminal</span><span class="p">.</span><span class="nf">disable_echo</span>
  <span class="n">read_password</span>
  <span class="no">Terminal</span><span class="p">.</span><span class="nf">enable_echo</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="no-magic-numbers"><a href="#no-magic-numbers">No magic numbers!</a></h2>

<p>I’ll admit this: comments are a <em>bit</em> better than <strong>nothing</strong> in this case. But we can do better! Fixing
those is pretty simple: add a constant. You can use a simple type like an integer, or get fancy with
hash-tables, structs and objects if needed.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### DON'T ###</span>

<span class="k">def</span> <span class="nf">notify</span>
  <span class="n">send_slack_msg</span> <span class="s2">"Hello world!"</span><span class="p">,</span> <span class="ss">channel_id: </span><span class="mi">0</span> <span class="c1"># General</span>
<span class="k">end</span>

<span class="c1">### DO ###</span>

<span class="no">GENERAL_CHANNEL_ID</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">notify</span>
  <span class="n">send_slack_msg</span> <span class="s1">'Hello world!'</span><span class="p">,</span> <span class="ss">channel_id: </span><span class="no">GENERAL_CHANNEL_ID</span>
<span class="k">end</span>

<span class="c1">### DO² ###</span>

<span class="no">CHANNEL_IDS</span> <span class="o">=</span> <span class="no">OpenStruct</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">general: </span><span class="mi">0</span><span class="p">).</span><span class="nf">freeze</span>

<span class="k">def</span> <span class="nf">notify</span>
  <span class="n">send_slack_msg</span> <span class="s1">'Hello world!'</span><span class="p">,</span> <span class="ss">channel_id: </span><span class="no">CHANNEL_IDS</span><span class="p">.</span><span class="nf">general</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="comments-for-measurement-units"><a href="#comments-for-measurement-units">Comments for measurement units</a></h2>

<p>Some people think this kind of comment is OK. I think, as in most of the cases, that a simple function replaces them. This
is the kind of thing that spreads quickly throughout your code, but it’s easy to avoid:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### DON'T ###</span>

<span class="k">module</span> <span class="nn">RecurringJob</span>
  <span class="k">def</span> <span class="nf">perform</span>
    <span class="n">do_important_stuff</span>

    <span class="n">seconds</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">6</span> <span class="c1"># 6 hours</span>
    <span class="no">RecurringJob</span><span class="p">.</span><span class="nf">run_in</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1">### DO ###</span>

<span class="k">module</span> <span class="nn">Seconds</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">from_hours</span><span class="p">(</span><span class="n">hours</span><span class="p">)</span>
    <span class="n">hours</span> <span class="o">*</span> <span class="mi">3600</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">module</span> <span class="nn">RecurringJob</span>
  <span class="k">def</span> <span class="nf">perform</span>
    <span class="n">do_important_stuff</span>

    <span class="n">seconds</span> <span class="o">=</span> <span class="no">Seconds</span><span class="p">.</span><span class="nf">from_hours</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
    <span class="no">RecurringJob</span><span class="p">.</span><span class="nf">run_in</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Using a module like that opens the possibility for other conversions, like <code class="language-plaintext highlighter-rouge">from_minutes</code>, <code class="language-plaintext highlighter-rouge">from_days</code>, etc.</p>

<h2 id="dont-use-comments-to-separate-things"><a href="#dont-use-comments-to-separate-things">Don’t use comments to separate things</a></h2>

<p>If you’re using comments to divide a file into sections, this may indicate that this file does too
much. It’s better to split it into several modules:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### DON'T ###</span>

<span class="k">module</span> <span class="nn">Utils</span>
  <span class="c1">### File System ###</span>

  <span class="k">def</span> <span class="nf">create_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="s2">""</span><span class="p">)</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">file_exists?</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="c1">### Text format ###</span>

  <span class="k">def</span> <span class="nf">bold</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">italic</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1">### DO ###</span>

<span class="k">module</span> <span class="nn">Utils::FS</span>
  <span class="k">def</span> <span class="nf">create_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="s2">""</span><span class="p">)</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">file_exists?</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">module</span> <span class="nn">Utils::Format</span>
  <span class="k">def</span> <span class="nf">bold</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">italic</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="dont-add-todos"><a href="#dont-add-todos">Don’t add TODO’s</a></h2>

<p>These kinds of TODO’s rarely get done. If you’re the one adding the comment, you’re the one that
cares about it. Do it now!</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### DON'T ###</span>

<span class="c1"># TODO: handle exceptions</span>
<span class="k">def</span> <span class="nf">tweet</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
  <span class="no">TwitterClient</span><span class="p">.</span><span class="nf">tweet</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1">### DO ###</span>

<span class="k">def</span> <span class="nf">tweet</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
  <span class="no">TwitterClient</span><span class="p">.</span><span class="nf">tweet</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="k">rescue</span> <span class="no">TwitterClient</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="n">log_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Don’t have time to deal with it? <strong>Open an issue</strong> instead. Issues are prioritized and end up in
your development pipeline (or maybe in some OSS contributor’s). Those TODO comments will be
forgotten as soon as your code goes to production.</p>

<aside class="Note Note--info">
  
    <div class="icon-box">
      <span class="icon">
        
          i
         </span>
    </div>
  

  
    <strong class="title">TODO or die!</strong>
  

  <p class="content">If you’re using Ruby, check out the gem <a href="https://github.com/searls/todo_or_die">todo or die</a>. It helps you keep those TODO’s done.</p>


  
</aside>

<h2 id="dont-add-deprecation-notes"><a href="#dont-add-deprecation-notes">Don’t add deprecation notes</a></h2>

<p>Deprecating code with comments is not efficient. Especially in libraries, developers won’t read
source code before using it. Be proactive and do something actionable (like a warning) right away.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### DON'T ###</span>

<span class="c1"># DEPRECATED: use `puts` instead</span>
<span class="k">def</span> <span class="nf">printf</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
  <span class="c1"># ...</span>
<span class="k">end</span>

<span class="c1">### DO ###</span>

<span class="k">def</span> <span class="nf">deprecate</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">alternative</span><span class="p">:)</span>
  <span class="no">Log</span><span class="p">.</span><span class="nf">warning</span><span class="p">(</span><span class="s2">"[DEPRECATION] `</span><span class="si">#{</span><span class="n">target</span><span class="si">}</span><span class="s2">` is deprecated. Use </span><span class="si">#{</span><span class="n">alternative</span><span class="si">}</span><span class="s2"> instead."</span><span class="p">)</span>
<span class="k">end</span>


<span class="k">def</span> <span class="nf">printf</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
  <span class="n">deprecate</span><span class="p">(</span><span class="ss">:printf</span><span class="p">,</span> <span class="ss">alternative: :puts</span><span class="p">)</span>

  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Are you using comments to generate deprecation documentation? Read <a href="#when-comments-are-ok">this section</a>.</p>

<h2 id="dont-add-after-update-notes"><a href="#dont-add-after-update-notes">Don’t add after-update notes</a></h2>

<p>This is the same principle as the one before: codify your comments.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### DON'T ###</span>

<span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">BaseModel</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">without_author</span>
    <span class="c1"># TODO: Use Post.where.missing(:author) after Rails 6.1</span>
    <span class="no">Post</span><span class="p">.</span><span class="nf">left_joins</span><span class="p">(</span><span class="ss">:author</span><span class="p">).</span><span class="nf">where</span><span class="p">(</span><span class="ss">authors: </span><span class="p">{</span> <span class="ss">id: </span><span class="kp">nil</span> <span class="p">})</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1">### DO ###</span>

<span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">BaseModel</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">without_author</span>
    <span class="k">raise</span> <span class="s1">'Use `Post.where.missing(:author)` instead'</span> <span class="k">if</span> <span class="no">Rails</span><span class="p">.</span><span class="nf">version</span> <span class="o">&gt;=</span> <span class="s1">'6.1'</span>

    <span class="no">Post</span><span class="p">.</span><span class="nf">left_joins</span><span class="p">(</span><span class="ss">:author</span><span class="p">).</span><span class="nf">where</span><span class="p">(</span><span class="ss">authors: </span><span class="p">{</span> <span class="ss">id: </span><span class="kp">nil</span> <span class="p">})</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>If an <code class="language-plaintext highlighter-rouge">exception</code> is too harsh for you, you can just give a warning.</p>

<p>You could go even further:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### DO² ###</span>

<span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">BaseModel</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">without_author</span>
    <span class="k">if</span> <span class="no">Rails</span><span class="p">.</span><span class="nf">version</span> <span class="o">&gt;=</span> <span class="s1">'6.1'</span>
      <span class="no">Log</span><span class="p">.</span><span class="nf">warn</span> <span class="s1">'Delete the else branch of this conditional'</span>
      <span class="no">Post</span><span class="p">.</span><span class="nf">where</span><span class="p">.</span><span class="nf">missing</span><span class="p">(</span><span class="ss">:author</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="no">Post</span><span class="p">.</span><span class="nf">left_joins</span><span class="p">(</span><span class="ss">:author</span><span class="p">).</span><span class="nf">where</span><span class="p">(</span><span class="ss">authors: </span><span class="p">{</span> <span class="ss">id: </span><span class="kp">nil</span> <span class="p">})</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>This is especially useful if the new method is more performant than the older one. You’ll get
instant performance without changing your code.</p>

<h2 id="dont-use-comments-as-backup"><a href="#dont-use-comments-as-backup">Don’t use comments as backup</a></h2>

<p>Developers shouldn’t fear deleting code. Commented code just muddles everything around it. Do you
think you may need it later? Short answer: <em>you probably won’t</em>. And even if you do, that’s why we
have Version Control Systems like Git <small>(If you’re not using a VCS, what are you doing?!)</small>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### DON'T ###</span>

<span class="c1"># NOTE: Maybe I'll need this someday</span>
<span class="c1"># def my_algorithm</span>
<span class="c1">#   old(implementation)</span>
<span class="c1"># end</span>

<span class="k">def</span> <span class="nf">my_algorithm</span>
  <span class="n">new</span><span class="p">(</span><span class="n">implementation</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="when-comments-are-ok"><a href="#when-comments-are-ok">When comments are OK</a></h2>

<p>I’m not here to say that <em>every</em> comment is bad. There are some cases when they’re the last
resource. If <em>no code</em> can do what you want, don’t be ashamed to add a comment. Some examples:</p>

<h3 id="1-comments-as-documentation"><a href="#1-comments-as-documentation">1. Comments as documentation</a></h3>

<p>Most languages have tools to generate documentation using code comments. That is nice because it keeps the docs near
the code it refers to. Here’s an example of <a href="https://yardoc.org/">YARD</a>, a Ruby documentation tool:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Reverses the contents of a String or IO object.</span>
<span class="c1">#</span>
<span class="c1"># @param contents [String, #read] the contents to reverse</span>
<span class="c1"># @return [String] the contents reversed lexically</span>
<span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
  <span class="n">contents</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="nf">read</span> <span class="k">if</span> <span class="n">contents</span><span class="p">.</span><span class="nf">respond_to?</span> <span class="ss">:read</span>
  <span class="n">contents</span><span class="p">.</span><span class="nf">reverse</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="2-comments-as-code-wut"><a href="#2-comments-as-code-wut">2. Comments as code (wut?)</a></h3>

<p>Sometimes comments are <em>actually</em> code. That is, they can be used to produce some behavior.</p>

<h4 id="magic-comments"><a href="#magic-comments">Magic comments</a></h4>

<p>Ruby has <a href="https://docs.ruby-lang.org/en/3.0.0/doc/syntax/comments_rdoc.html#label-Magic+Comments">magic comments</a> that change the behavior of the interpreter in some ways. Just put them in the
beginning of the file, and it will take effect. For example:</p>

<ul>
  <li>This comment makes the interpreter warns about wrong indentation:</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># warn_indent: true</span>
</code></pre></div></div>

<ul>
  <li>You can change the file’s encoding:</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># encoding: utf-8</span>
</code></pre></div></div>

<h4 id="parsing-comments"><a href="#parsing-comments">Parsing comments</a></h4>

<p>Some libraries parse comments too. Linters often use comments to disable rules momentarily:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># rubocop:disable Layout/LineLength</span>
<span class="k">def</span> <span class="nf">this_could_be_a_very_long_line_that_extends_forever_into_infinity</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
<span class="c1"># rubocop:enable Layout/LineLength</span>
</code></pre></div></div>

<p>Another example is the library <a href="/baking-tasks-with-bake/">Bake</a>, which parses documentation comments to get information about type
coercions.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Creates a new post</span>
<span class="c1">#</span>
<span class="c1"># @param post_name [String] name of the post to be created.</span>
<span class="c1"># @param categories [Array(Symbol)] categories of the post.</span>
<span class="k">def</span> <span class="nf">new_post</span><span class="p">(</span><span class="n">post_name</span><span class="p">,</span> <span class="ss">categories: </span><span class="p">[])</span>
  <span class="n">pp</span> <span class="n">categories</span>
<span class="k">end</span>
</code></pre></div></div>

<p>This way it parses input from the terminal and automatically coerces params into the desired type.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bake new_post <span class="s1">'test-post'</span> <span class="nv">categories</span><span class="o">=</span>ruby,testing
<span class="c"># output: [:ruby, :testing]</span>
</code></pre></div></div>

<p>OBS: even though type checking <em>can</em> be implemented with comments, <a href="https://sorbet.org/">sorbet</a>, <a href="https://github.com/ruby/rbs">rbs</a>, and <a href="https://www.ruby-toolbox.com/search?display=compact&amp;q=type+check">several
others</a> have shown that type checking dynamic-typed languages is possible with code.</p>

<h3 id="3-when-you-have-no-other-tool"><a href="#3-when-you-have-no-other-tool">3. When you have no other tool</a></h3>

<p>Sometimes there are some things that you cannot explain with code. I’m not talking about how you
did, but <em>why</em> you did them.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">fetch_foos</span>
  <span class="c1"># NOTE: We're disabling params sorting because the FooAPI requires</span>
  <span class="c1">#       params to be in the following order: foo, bar, baz</span>
  <span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/foo-api'</span><span class="p">,</span> <span class="ss">params: </span><span class="p">{</span> <span class="ss">foo: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">bar: </span><span class="kp">false</span><span class="p">,</span> <span class="ss">baz: </span><span class="kp">false</span> <span class="p">},</span> <span class="ss">sort_params: </span><span class="kp">false</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Do you have any other good cases for comments? Let me know in the comments!</p>

<h2 id="comments-are-not-code"><a href="#comments-are-not-code">Comments are not code!</a></h2>

<p>Comments tend to get lost and collect dust. When we’re in a big refactor, we’ll rarely think in
refactoring comments too. Comments <em>are not tested</em>, so they end up outdated, with typos, wrong
information, and worse: <strong>bugs</strong>.</p>

<p>Using code, on the other hand, has several benefits: syntax highlighting, grepping, compile/runtime
checks, <em>testing</em>!</p>

<p>Comments are a confession that we were unable to represent our ideas with code. That happens
sometimes, but try your best to avoid them.</p>

<p><strong>TLDL:</strong> Don’t use comments. Codify your comments.</p>




  <div class="Categories">
    <h2>Categories</h2>

    
    
      <a href="/categories/#comments"><span class="Tag Tag--outlined">comments</span></a>
    
      <a href="/categories/#refactoring"><span class="Tag Tag--outlined">refactoring</span></a>
    
  </div>

  <!-- POST NAVIGATION -->
  <div class="postNav clearfix">
    
      <a class="prev" href="/productive-lazyness/"><span>&laquo;&nbsp;Productive Laziness</span>
      
    </a>
    
    
      <a class="next" href="/on-learning-rust/"><span>On learning Rust&nbsp;&raquo;</span>
      
      </a>
    
  </div>
</article>
      </div>
   </div><!-- end .content -->

   <div class="footer">
   <div class="container">
      <p class="copy"></a> Powered by <a href="http://jekyllrb.com">Jekyll</a> ❤️</p>

      <div class="footer-links">
         <ul class="noList">
            
            
            <li><a href="https://twitter.com/matheusrich">
                  <svg id="twitter" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" style="height: 30px; width: 30px;"><circle class="outer-shape" cx="50" cy="50" r="48" style="opacity: 1;"></circle>
                  <path class="inner-shape" style="opacity: 1;" transform="translate(25,25) scale(0.5)" d="M99.001,19.428c-3.606,1.608-7.48,2.695-11.547,3.184c4.15-2.503,7.338-6.466,8.841-11.189 c-3.885,2.318-8.187,4-12.768,4.908c-3.667-3.931-8.893-6.387-14.676-6.387c-11.104,0-20.107,9.054-20.107,20.223 c0,1.585,0.177,3.128,0.52,4.609c-16.71-0.845-31.525-8.895-41.442-21.131C6.092,16.633,5.1,20.107,5.1,23.813 c0,7.017,3.55,13.208,8.945,16.834c-3.296-0.104-6.397-1.014-9.106-2.529c-0.002,0.085-0.002,0.17-0.002,0.255 c0,9.799,6.931,17.972,16.129,19.831c-1.688,0.463-3.463,0.71-5.297,0.71c-1.296,0-2.555-0.127-3.783-0.363 c2.559,8.034,9.984,13.882,18.782,14.045c-6.881,5.424-15.551,8.657-24.971,8.657c-1.623,0-3.223-0.096-4.796-0.282 c8.898,5.738,19.467,9.087,30.82,9.087c36.982,0,57.206-30.817,57.206-57.543c0-0.877-0.02-1.748-0.059-2.617 C92.896,27.045,96.305,23.482,99.001,19.428z"></path>
                  </svg>
            </a></li>
            
            
            <li><a href="https://github.com/matheusrich">
                  <svg id="github" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" style="height: 30px; width: 30px;"><circle class="outer-shape" cx="50" cy="50" r="48" style="opacity: 1;"></circle>
                  <path class="inner-shape" style="opacity: 1;" transform="translate(25,25) scale(0.5)" d="M50,1C22.938,1,1,22.938,1,50s21.938,49,49,49s49-21.938,49-49S77.062,1,50,1z M79.099,79.099 c-3.782,3.782-8.184,6.75-13.083,8.823c-1.245,0.526-2.509,0.989-3.79,1.387v-7.344c0-3.86-1.324-6.699-3.972-8.517 c1.659-0.16,3.182-0.383,4.57-0.67c1.388-0.287,2.855-0.702,4.402-1.245c1.547-0.543,2.935-1.189,4.163-1.938 c1.228-0.75,2.409-1.723,3.541-2.919s2.082-2.552,2.847-4.067s1.372-3.334,1.818-5.455c0.446-2.121,0.67-4.458,0.67-7.01 c0-4.945-1.611-9.155-4.833-12.633c1.467-3.828,1.308-7.991-0.478-12.489l-1.197-0.143c-0.829-0.096-2.321,0.255-4.474,1.053 c-2.153,0.798-4.57,2.105-7.249,3.924c-3.797-1.053-7.736-1.579-11.82-1.579c-4.115,0-8.039,0.526-11.772,1.579 c-1.69-1.149-3.294-2.097-4.809-2.847c-1.515-0.75-2.727-1.26-3.637-1.532c-0.909-0.271-1.754-0.439-2.536-0.503 c-0.782-0.064-1.284-0.079-1.507-0.048c-0.223,0.031-0.383,0.064-0.478,0.096c-1.787,4.53-1.946,8.694-0.478,12.489 c-3.222,3.477-4.833,7.688-4.833,12.633c0,2.552,0.223,4.889,0.67,7.01c0.447,2.121,1.053,3.94,1.818,5.455 c0.765,1.515,1.715,2.871,2.847,4.067s2.313,2.169,3.541,2.919c1.228,0.751,2.616,1.396,4.163,1.938 c1.547,0.543,3.014,0.957,4.402,1.245c1.388,0.287,2.911,0.511,4.57,0.67c-2.616,1.787-3.924,4.626-3.924,8.517v7.487 c-1.445-0.43-2.869-0.938-4.268-1.53c-4.899-2.073-9.301-5.041-13.083-8.823c-3.782-3.782-6.75-8.184-8.823-13.083 C9.934,60.948,8.847,55.56,8.847,50s1.087-10.948,3.231-16.016c2.073-4.899,5.041-9.301,8.823-13.083s8.184-6.75,13.083-8.823 C39.052,9.934,44.44,8.847,50,8.847s10.948,1.087,16.016,3.231c4.9,2.073,9.301,5.041,13.083,8.823 c3.782,3.782,6.75,8.184,8.823,13.083c2.143,5.069,3.23,10.457,3.23,16.016s-1.087,10.948-3.231,16.016 C85.848,70.915,82.88,75.317,79.099,79.099L79.099,79.099z"></path>
                  </svg>
            </a></li>
            
            
            <li><a href="https://www.linkedin.com/in/matheus-richard">
                  <svg id="linkedin" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" style="height: 30px; width: 30px;"><circle class="outer-shape" cx="50" cy="50" r="48" style="opacity: 1;"></circle>
                  <path class="inner-shape" style="opacity: 1;" transform="translate(30,25) scale(1.8)" d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"/>
                  </svg>
            </a></li>
            
            <li>
               <a href="https://dev.to/matheusrich" class="dark-safe">
                 <img src="/assets/img/dev-to-badge.svg" alt="Matheus Richard's DEV Profile" height="30" width="30">
               </a>
            </li>
            
            <li><a href="mailto:matheusrichardt@gmail.com">
                  <svg id="mail" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" style="height: 30px; width: 30px;"><circle class="outer-shape" cx="50" cy="50" r="48" style="opacity: 1;"></circle>
                  <path class="inner-shape" style="opacity: 1;" transform="translate(25,25) scale(0.5)" d="M50,1C22.938,1,1,22.938,1,50s21.938,49,49,49s49-21.938,49-49S77.062,1,50,1z M25.5,25.5h49 c0.874,0,1.723,0.188,2.502,0.542L50,57.544L22.998,26.041C23.777,25.687,24.626,25.499,25.5,25.5L25.5,25.5z M19.375,68.375v-36.75 c0-0.128,0.005-0.256,0.014-0.383l17.96,20.953L19.587,69.958C19.448,69.447,19.376,68.916,19.375,68.375L19.375,68.375z M74.5,74.5 h-49c-0.541,0-1.072-0.073-1.583-0.212l17.429-17.429L50,66.956l8.653-10.096l17.429,17.429C75.572,74.427,75.041,74.5,74.5,74.5 L74.5,74.5z M80.625,68.375c0,0.541-0.073,1.072-0.211,1.583L62.652,52.195l17.96-20.953c0.008,0.127,0.014,0.255,0.014,0.383 L80.625,68.375L80.625,68.375z"></path>
                  </svg>
            </a></li>
            
         </ul>
      </div>
   </div>
</div><!-- end .footer -->


   <script defer src="/assets/js/responsive-nav.min.js"></script>
<script defer type="module" src="/assets/js/scripts.js"></script>


</body>

</html>
